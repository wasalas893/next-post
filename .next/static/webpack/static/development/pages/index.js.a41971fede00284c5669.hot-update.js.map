{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.a41971fede00284c5669.hot-update.js","sources":["webpack:///./components/index/PostFeed.js"],"sourcesContent":[" import Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nimport NewPost from './NewPost';\nimport Post from './Post';\nimport { addPost } from '../../lib/api';\n\nclass PostFeed extends React.Component {\n  state = {\n    posts:[],\n    text:\"\",\n    image:\"\",\n    isAddingPost:false\n  };\n  componentDidMount(){\n    this.postData=new FormData();\n  }\n\n  handleChange = event => {\n    let inputValue;\n\n    if (event.target.name === \"image\") {\n      inputValue = event.target.files[0];\n    \n    } else {\n      inputValue = event.target.value;\n    }\n    this.postData.set(event.target.name, inputValue);\n    this.setState({ [event.target.name]: inputValue });\n  };\n\n\n  handleAddPost=()=>{\n    const { auth }=this.props;\n       this.setState({ isAddingPost:true })\n    addPost(auth.user._id,this.postData)\n    .then(postData=>{\n      const updatedPosts=[postData,...this.state.posts]\n      this.setState({\n        posts:updatedPosts,\n        isAddingPost:false,\n        text:\"\",\n        image:\"\"\n      })\n      this.postData.delete('image')\n    })\n    .catch(err=>{\n      console.error(err);\n      this.setState({ isAddingPost:false })\n    })\n    }\n\n  render() {\n\n     const { classes,auth }=this.props;\n     const { text, image,isAddingPost }=this.state;\n\n    return (\n      <div className={classes.root}>\n        <Typography variant=\"h4\" component=\"h1\" align=\"center\"\n        color=\"primary\" className={classes.title}>\n          Post Feed\n        </Typography>\n        <NewPost\n          auth={auth}\n          text={text}\n          image={image}\n          isA\n          handleChange={this.handleChange}\n        />\n      </div>\n    );\n  }\n}\n\nconst styles = theme => ({\n  root: {\n    paddingBottom: theme.spacing.unit * 2\n  },\n  title: {\n    padding: theme.spacing.unit * 2\n  }\n});\n\nexport default withStyles(styles)(PostFeed);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AAJA;AACA;AASA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;;AArCA;AACA;AACA;;;AAoCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AADA;AAKA;AACA;AACA;AACA;AACA;AALA;AASA;;;;AAjEA;AACA;AAmEA;AAAA;AACA;AACA;AADA;AAGA;AACA;AADA;AAJA;AAAA;AACA;AAQA;;;;A","sourceRoot":""}